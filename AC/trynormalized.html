<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>NYC Building Codes</title>
<style>
a.legHistory:hover, a.bbHistory:hover {
	color: green;
	background-color: #D8D8D8;
.legHistory, .bbHistory {
	cursor: pointer;
	text-decoration: none;
}
</style>

<body>
<h1>TESTING LEGHISTORY</h1>
<div id="filecontent">
</div>
<script src="https://d3js.org/d3.v6.min.js"></script>
<script type="text/javascript">
/*
ADMINISTRATION CODE BOOK Normalization Process
chapter file: 
	run normalized script
	replace all  id="  ->   orgid="
	replace all  myclass="  ->   id="

TO DO

-rename 5 admin chapters and 5 admin tree snippets to 
    "ACNNN.NNN.N.NNN"
		-remove dashes
		-remove section symbol
		-remove hyphens
		-remove "28"



*/

(function() {

Promise.all([
    d3.csv("original_ResourceIndex.csv")  //files[0]
]).then(function(files) {

		let thefiles=["ch1_admin.html"];

		let filecontentdiv=document.querySelector("#filecontent");	
		let myarray=[];
		let inputChapter="";

		
		
for (  x=0;x<thefiles.length;x++ ) {
	fetch(thefiles[x]).then(function (response){
		return response.text();
	}).then(function(_innerHTML){
		filecontentdiv.innerHTML="";
		filecontentdiv.innerHTML=_innerHTML;
		//let vAllDivsInChapter=document.querySelectorAll("div b");
		let vAllDivsInChapter=document.querySelectorAll("div");
		
		vAllDivsInChapter.forEach( (currDiv) => {


			if (currDiv.id.toLowerCase().indexOf("art") < 0 && currDiv.id.indexOf("Ch") < 0 &&  currDiv.id.trim().length > 0 ) {
//debugger;
				let mytemp="";
					mytemp = currDiv.id.replace(/ยง/g,"").replace(/\ast/g,"").replace(/\-/g,".").replace(/\_/g,".").replace(/\*/g,".");
				mytemp=mytemp.replace("AC28.","AC");
				console.log(mytemp, "   ", currDiv.id);
				currDiv.setAttribute("myclass",mytemp);

			} else {
			console.log("exception************************** ", currDiv);
			};


		}); //end of current div in chapter file		
	}).catch(function(err){
		console.warn(`Problems:`);
		console.log(err);
	});
};
}).catch(function(err) {
    // handle error here
});
return;




})();
</script>
</body>
</html>